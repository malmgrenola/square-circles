{% extends "base.html" %}
{% load static %}
{% load humanize %}

{% block page_header %}
    <div class="row justify-content-md-center mx-1">
        <div class="col my-4 text-center">
            <h1>My Profile</h1>
            <p class="text-muted">signed in as <strong>{{ user }}</strong> ({{ user.email }})</p>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="row justify-content-md-center mx-1">
        <div class="col-12 {% if orders %}col-lg-6{% endif %} box mb-3">
            <p class="text-muted ">Default Delivery Information</p>
            <form class="mt-3" action="{% url 'profile' %}" method="POST" id="profile-update-form">
                {% csrf_token %}
                {{ user_form|crispy }}
                {{ form|crispy }}
                <button class="btn btn-primary sc btn-rounded my-3">Update</button>
            </form>
        </div>
        {% if orders %}
        <div class="col-12 col-lg-6 box mb-3">
            <p class="text-muted ">My Reservations</p>
            <ul>
            {% for order in orders %}
                <li><a href="{% url 'order_history' order.order_number %}">{{ order.date|date:"F d, Y H:i"}}</a> {{ order.grand_total }} EUR <span class="text-muted">({{order}})</span></li>
            {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        <div class="col-12 col-lg-6 box mb-3">
            <p class="text-muted ">My Reviews</p>
            {% if reviews %}
            <ul>
            {% for review in reviews %}
                <li><a href="{% url 'change' review.id %}">{{ review.rating }} star review by {{ review.name }} made {{ review.date|naturaltime }}</a></li>
            {% endfor %}
            </ul>
            {% endif %}
            <a class="btn btn-primary sc" href="{% url 'add' %}">Write review</a>
        </div>
        
     </div>
{% endblock %}

